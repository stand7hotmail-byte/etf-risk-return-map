# プロジェクト概要 (README.md 要約)

このプロジェクトは、ETFポートフォリオの分析、最適化、シミュレーションを行うFastAPIベースのWebアプリケーションです。主要な機能として、効率的フロンティア計算、モンテカルロシミュレーション、カスタムポートフォリオ分析、DCAシミュレーション、ヒストリカルパフォーマンス分析などが含まれます。モダンなBootstrap 5 UIとPlotly.jsによるリアルタイム視覚化を提供し、JWTベースのユーザー認証、Google OAuth、証券会社レコメンデーション、アフィリエイトクリックトラッキング、管理者ダッシュボード機能も備えています。

バックエンドはFastAPI（Python 3.9+）とSQLAlchemy 2.0をORMとして使用し、フロントエンドはBootstrap 5.3、Plotly.js、Vanilla JavaScriptで構築されています。Yahoo FinanceからのリアルタイムデータとCSVからのETF定義を利用します。環境設定は`.env`ファイルで行い、Google Cloud Platformでのデプロイが推奨されています。

---

# プロジェクト憲章（Gemini CLI 向け）

このセクションには、Gemini CLIがプロジェクトの目的と戦略を理解し、より効果的に共同作業を進めるための重要な情報が記述されています。

## 1. プロジェクトの最終目的 (The "Why")
*   **最上位目標:** このプロジェクトの最終目標は、Webアプリの利用者に質の高いポートフォリオ分析ツールを提供し、その結果として**アフィリエイト収益を最大化する**ことです。
*   **主な収益源:** 現時点での主な収益源は**証券会社の口座開設アフィリエイト**です。将来的には、他の金融商品やサービスの紹介も視野に入れます。

## 2. ユーザー体験(UX)と戦略 (The "How")
*   **価値提供の優先:** 常に**ユーザーへの価値提供を最優先**します。強引な広告表示や、ユーザー体験を損なうような収益化は避け、ユーザーの利益を第一に考えます。
*   **自然な提案:** ユーザーがポートフォリオ分析を終えた後の「次のステップ」として、**ごく自然な流れで最適な証券会社を提案するUI/UX**を目指します。
*   **信頼性の構築:** SEOやブログ記事などのコンテンツマーケティングを通じて**専門性と信頼性を構築**し、オーガニックなトラフィックを獲得することが重要な戦略です。

## 3. 技術的な前提条件 (The "What")
*   **主要技術スタック:** バックエンドは**FastAPI**と**SQLAlchemy**、フロントエンドは**Vanilla JavaScript**と**Bootstrap 5**を基本技術とします。
*   **インフラ:** 本番環境は**Google Cloud Platform (GCP)**でのデプロイを想定しています。
*   **コード品質:** `black`と`ruff`によるフォーマットと静的解析を重視し、コードの一貫性を保ちます。

## 4. 開発上のルール (The "Rules")
*   **テストの重視:** 機能追加や大きな変更の後は、関連するテストを実行し、既存機能が壊れていないか確認します。
*   **コミット規約:** コミットメッセージは、`docs: ` `feat: ` `fix: ` などの**Conventional Commits**の規約に沿うことを推奨します。
*   **計画の提案:** 大規模なリファクタリングや新機能の追加など、複数のステップにまたがる作業を行う前には、まず計画を提案し、あなたの承認を得てから実行します。